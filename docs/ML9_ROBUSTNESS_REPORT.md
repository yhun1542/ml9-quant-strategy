# ML9 엔진 종합 강건성 테스트 리포트

**저자**: Manus AI
**날짜**: 2025년 11월 28일

## 1. Executive Summary

본 리포트는 ML9 퀀트 트레이딩 엔진의 강건성을 검증하기 위해 수행된 일련의 스트레스 테스트 결과를 종합적으로 분석합니다. 초기 2021-2024년(30개 종목) 백테스트에서 기록된 **Sharpe 4.17**은 특정 강세장 조건과 소규모 유니버스에 다소 과적합된 결과로 판단됩니다. 

보다 현실적인 조건(기간 확장, 유니버스 확장)에서의 테스트 결과, ML9 엔진의 기대 Sharpe Ratio는 **1.3 ~ 2.0** 수준으로 조정되었습니다. 이는 여전히 의미 있는 알파를 창출하는 강력한 성능이지만, 특정 시장 환경(regime)에서는 성능이 저하되는 **Regime Dependency**가 명확히 확인되었습니다. 특히, 2020년 COVID-19와 같은 극심한 변동성 기간을 학습 데이터로 사용했을 때, 이후 안정적인 시장(2023년) 예측에 실패하는 경향을 보였습니다.

결론적으로 ML9 엔진은 확장성과 잠재력을 갖추고 있으나, 시장 변화에 대한 적응력을 높이기 위한 동적 모델 가중, Regime 감지, 피처 개선 등 v1.6 개발 방향에 대한 구체적인 과제를 도출했습니다.

## 2. 테스트 개요

### 2.1. 테스트 목적

- **과적합 검증**: 초기 Sharpe 4.17이 특정 기간/종목에 과적합되었는지 확인
- **강건성 평가**: 다양한 시장 환경(기간, 유니버스)에서의 성능 일관성 검증
- **실효성 분석**: 실제 운용 환경에서의 기대 성과 추정

### 2.2. 테스트 방법론

| 테스트 항목 | 목적 | 데이터 | 윈도우 | 핵심 질문 |
| :--- | :--- | :--- | :--- | :--- |
| **1. 기간 확장** | 과거 성과 검증 | 2015-2020 (29종목) | 3-Window | "과거에도 잘 작동했는가?" |
| **2. 유니버스 확장** | 확장성 검증 | 2021-2024 (SP100) | 2-Window | "더 많은 종목에서도 성과가 유지되는가?" |
| **3. 3년 학습** | 장기 학습 효과 | 2020-2024 (SP100) | 3-Window | "COVID 포함 장기 학습이 예측에 미치는 영향은?" |

*모든 테스트는 Numba JIT 및 멀티프로세싱으로 최적화되어 약 10-12배의 속도 향상을 달성했습니다.*

## 3. 종합 결과 및 분석

### 3.1. 백테스트 결과 요약

| 테스트 | 기간 | 종목 수 | Sharpe | 연간 수익률 | 연간 변동성 | 최대 낙폭 (MDD) |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **초기 모델** | 2021-2024 | 30 | **4.17** | 93.31% | 24.8% | -12.52% |
| **기간 확장** | 2015-2020 | 29 | 0.83 | 25.66% | 34.8% | -42.66% |
| **유니버스 확장** | 2021-2024 | 100 | 1.96 | 35.42% | 16.2% | -11.28% |
| **3년 학습** | 2020-2024 | 90 | 1.34 | 23.30% | 16.7% | -14.57% |

### 3.2. 기간 확장 테스트 (2015-2020)

- **결과**: Sharpe 0.83, MDD -42.66%
- **분석**: 2021-2024 기간 대비 성능이 80% 이상 급감했습니다. 특히 2015-2017년 데이터로 학습 후 2018년을 예측한 윈도우에서는 **Sharpe -0.34**를 기록하며 실패했습니다. 이는 모델이 특정 시장 환경에 매우 민감하게 반응하며, 학습 기간과 다른 패턴의 시장에서는 성과가 저하될 수 있음을 시사합니다.

### 3.3. 유니버스 확장 테스트 (SP100, 2021-2024)

- **결과**: Sharpe 1.96, MDD -11.28%
- **분석**: 종목 수를 30개에서 100개로 늘렸을 때, Sharpe는 4.17에서 1.96으로 하락했지만 여전히 매우 높은 수준을 유지했습니다. 중요한 점은 **변동성(16.2%)과 MDD(-11.28%)가 오히려 개선**되었다는 것입니다. 이는 분산 투자를 통한 안정성 확보 가능성을 보여주며, ML9 엔진이 더 큰 유니버스에서도 효과적으로 작동함을 증명합니다.

### 3.4. 3년 학습 기반 테스트 (SP100, 2020-2024)

- **결과**: Sharpe 1.34, 윈도우별 Sharpe 편차 (0.00 ~ 2.23)
- **분석**: 이 테스트는 ML9의 **Regime Dependency**를 가장 명확하게 보여줍니다.
    > **Window 1 (2023년 예측)**: 2020년 COVID-19 폭락장을 포함한 3년(2020-2022) 데이터로 학습한 결과, 상대적으로 안정적이었던 2023년 시장 예측에 실패하며 **Sharpe 0.00**을 기록했습니다. 극심한 변동성 장세에서 학습된 패턴이 다른 종류의 시장에서는 독이 된 것입니다.
    > **Window 2 (2024년 상반기 예측)**: 학습 기간을 4년(2020-2023)으로 늘리자 **Sharpe 2.23**으로 성과가 크게 개선되었습니다. 이는 더 긴 데이터가 모델의 일반화에 도움이 될 수 있음을 시사합니다.

### 3.5. 피처 중요도 분석

모든 테스트에서 일관되게 다음과 같은 피처 중요도가 관찰되었습니다.
- **Volatility (변동성)**: 57% ~ 65%
- **Momentum (모멘텀)**: 35% ~ 43%
- **Value (가치)**: **0%**

현재 `1/price`로 단순하게 구현된 가치 팩터는 모델에 전혀 기여하지 못하고 있습니다. 이는 시급히 개선되어야 할 부분입니다.

## 4. 결론 및 제언

### 4.1. 최종 결론

1.  **현실적 기대치**: ML9 엔진의 현실적인 Sharpe Ratio 기대치는 **1.3 ~ 2.0** 수준입니다. 초기 Sharpe 4.17은 과적합된 수치입니다.
2.  **Regime Dependency**: 모델 성능은 학습 데이터의 시장 환경에 크게 의존합니다. 특히, 특정 이벤트(COVID-19)가 포함된 학습 데이터는 이후 다른 시장 환경 예측에 부정적인 영향을 미칠 수 있습니다.
3.  **확장성 및 안정성**: SP100 유니버스 확장 시 변동성과 MDD가 개선되어, 전략의 확장성과 안정성이 입증되었습니다.
4.  **피처 개선 필요**: 현재의 가치 팩터는 효과가 없어, PBR, PER 등 보다 정교한 가치 팩터 도입이 필요합니다.

### 4.2. v1.6 개발 제언

- **엔진 다각화**: 현재의 모멘텀/저변동성 중심 엔진 외에, 다른 시장 환경(예: 평균 회귀장)에서 잘 작동하는 보조 엔진을 개발하여 포트폴리오를 다각화해야 합니다.
- **동적 모델 가중**: VIX 지수, 금리 등 거시 지표를 기반으로 실시간으로 최적의 엔진이나 모델 가중치를 동적으로 조절하는 메타-모델을 도입합니다.
- **피처 엔지니어링 고도화**: PBR, PER, PSR 등 전통적인 가치 팩터를 추가하고, 피처 중요도가 0인 `value_proxy`를 제거 또는 개선합니다.
- **지속적인 Walk-Forward 테스트**: 6개월 또는 1년 주기로 Walk-Forward 백테스트를 자동화하여 모델 성능 저하를 지속적으로 모니터링하는 시스템을 구축합니다.

---

**[첨부 파일]**
- `ml9_2015_2020_optimized.json`: 기간 확장 테스트 결과
- `ml9_sp100_2021_2024_optimized.json`: 유니버스 확장 테스트 결과
- `ml9_sp100_2020_2024_3window.json`: 3년 학습 기반 테스트 결과
